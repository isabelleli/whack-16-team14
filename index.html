<!DOCTYPE html>
<html>
    
    <head>
        
        <style>
            #image {
/*                background-color: blue;*/
                background-image:url("pic1.jpg"); /* gets first pic */
                background-size: 100% auto;
                background-repeat: no-repeat;
                transition: 1.5s;
                }
            
            #question0 {
                width: 24%;
                position: absolute;
                left: 900px;
                top: 560px;
                color: darkslategray;
                font-size: 20px;
            }

            #question1 {
                width: 20%;
                position: absolute;
                left: 180px;
                top: 375px;
                color: ivory;
                font-size: 20px;
            }
            
            #question2 {
                width: 10%;
                position: absolute;
                left: 950px;
                top: 335px;
                color: darkslategray;
                font-size: 20px;
            }
            
            #question3 {
                width: 20%;
                position: absolute;
                left: 300px;
                top: 50px;
                color: ivory;
                font-size: 20px;
            }
            
            #educationalFact1{
                font-family: arial;
                color:ivory;
                width: 25%;
            }
            #educationalFact2{
                font-family: arial;
                color:ivory;
                width: 25%;
            }
             #educationalFact3{
                font-family: arial;
                color:ivory;
                width: 25%;
            }
            #button {
                
                /*add in transparent button things      */   
            }
            
            body {
                font-family: Stellar;
            }
            
            
    </style>
        
    </head>
    
    <body id="image">

        
<!--        <h1>Day 1</h1>-->
        <div id="question0"></div>
        <div id="question1"></div>
        <div id="question2"></div>
        <div id="question3"></div>
        <div id="answer1"></div>
        <div id="answer2"></div>
        <div id="answer3"></div>
        
        <div id = "educationalFact0"></div>
        <div id = "educationalFact1"></div>
        <div id = "educationalFact2"></div>
        <div id = "educationalFact3"></div>

        
    
            <div id = "button">
            <button style = "background-color: transparent; border-width: 2px; border-radius: 10px; border:none" onclick="nextScene();decrement()" id="1"></button> <!-- go to next.js file for nextScene func-->
            <button style = "background-color: transparent; border-width: 2px; border-radius: 10px; border:none" onclick="nextScene();decrement()" id="2"></button>
            <button style = "background-color: transparent; border-width: 2px; border-radius: 10px;border:none" onclick="nextScene();decrement()" id="3"></button>
                
            <button style = "background-color: transparent; border-width: 2px; border-radius: 10px;border:none size:10px 10px; visibility:hidden" onclick="nextScene()"  id="4"><img src="arrow.png" alt="Continue"></button>
            
                
                
                
        </div>
        
        
        
       <canvas id="myCanvas" width="1500" height="500" ></canvas>
        <script> /* thermometer part of simulation */
            var canvas = document.getElementById("myCanvas");
            var ctx = canvas.getContext("2d");
            
            var therm_x = 1025;
            var therm_y = 35;
            var therm_width = 20;
            var therm_height = 100;
            
            var black_x = 1020;
            var black_y = 30;
            var black_width = 30;
            var black_height = 110;
            
            var increment = 25;
            var score = "";
            
            function decrement() {
                therm_y += increment;
                therm_height -= increment;
                score += "|";
            }
            
            function drawScore() {
                ctx.font = "20px Verdana";
                ctx.fillStyle = "ivory";
                ctx.fillText("Microaggressions", 955, 180);
                ctx.fillText("Faced:" + score, 1000, 210);
            }
            
            function drawThermometer() {
                ctx.beginPath();
                ctx.rect(therm_x, therm_y, therm_width, therm_height);
                ctx.fillStyle = "red";
                ctx.fill();
                ctx.closePath();
                
                ctx.font = "20px Verdana";
                ctx.fillStyle = "ivory";
                ctx.fillText("Energy Spent:", 955, 20);
            }
            
            function drawThermBackground() {
                ctx.beginPath();
                ctx.rect(black_x, black_y, black_width, black_height);
                ctx.fillStyle = "black";
                ctx.fill();
                ctx.closePath();
        
                ctx.beginPath();
                ctx.rect(1025, 35, 20, 100);
                ctx.fillStyle = "ivory";
                ctx.fill();
                ctx.closePath();
            }
            
            function draw() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                drawThermBackground();
                drawThermometer();
                drawScore();
                requestAnimationFrame(draw);
            }
            
            draw();
        </script>

        
        <script>
            
            console.log("generic");
            var index = 0;
            var timerCheck = 0;
            var counter = 1;
            var questioncount = 0;
            
            var scenarios = [{
                background : "pic3bubble.jpg", 
                question : "As you leave, the doorman comments on the bags you're carrying. 'Are you sure you can carry that? It looks too heavy for a girl like you.'", 
                answer1 : "You smile and nod and let him carry it", 
                answer2 : "You say, 'No, I can handle this myself'", 
                answer3 : "You ignore him and leave", 
                transitionResponse : "This is an example of gender stereotyping. Gender stereotyes are pervasive in today's society. Common stereotypes about women include the assumption that they are weak and incompetent.", 
                audio : "happyChances.mp3" }, 
            {background : "pic4bubble.jpg", question : "You're walking to work now, and a guy on the street says to you 'Damn, you look fine girl. Smile for me!'", answer1 : "You smile", answer2 : "You say, 'This is considered harassment, and you need to leave me alone.'", answer3 : "You ignore him", transitionResponse : "Over 99% of American women have been a victim of street harrasment such as honking, whistling, kissing noises, staring, etc.", audio : "trafficJam.mp3" }, 
            {background : "pic5bubble.jpg", question : "You've arrived at work, and you're currently in a meeting. You keep getting interrupted by your male coworker while you're speaking", answer1 : "You allow the coworker to keep interupting", answer2 : "You say, 'Excuse me, can you let me finish my sentence?'", answer3 : "You decide to just let the coworker speak for you", transitionResponse : "Womenâ€™s perceived competency drops by 35 percent and their perceived deserved compensation by $15,088 when they are assertive or forceful.", audio : "officeSounds.mp3" },
            {background: "pic6.jpg", question : "It's finally the end of the day, and you're at the bar with friends. While you're partying, a guy grabs a random woman's waist from the back. She tells him to stop, but he doesn't listen.", answer1 : "You cheer her on", answer2 : "You tell him to back off because 'Yes means yes, and no means no'.", answer3 : "You pretend you never saw", transitionResponse : "Nearly 57 percent of women reported being touched or grabbed in a sexual way by a stranger in public", audio: "busyBar.mp3" }];
     
            
        
//            var audio = new Audio('metro.mp3');
            var audio = document.createElement('audio');
            audio.id = "audio";
            audio.src = 'alarm.mp3';
            audio.play();
            
            var vol = 0;
            while (vol > 0)
            {
                vol -= 5
                audio.setVolume(vol)
            }
            
            
         
            
        function  updateButtons(){
            
            console.log("updateButtons");
            
                console.log("in update buttons, here is the index:" + index)
                document.getElementById(1).textContent = scenarios[index]["answer1"];
                document.getElementById(2).textContent = scenarios[index]["answer2"];
                document.getElementById(3).textContent = scenarios[index]["answer3"];
            
            
        }
            
            
            function  clearButtons(){
                
                document.getElementById(1).textContent = "";
                document.getElementById(2).textContent = "";
                document.getElementById(3).textContent = "";
            }
                
            if(timerCheck===0 || timerCheck===1){
                function changeImage(){
                    console.log("in images");
                
                    if(timerCheck === 0){
                    
                        audio.src = 'happyChances.mp3';
                        audio.play();
                        document.body.style.backgroundImage = "url('pic2.jpg')";
                        timerCheck = timerCheck+1;
                    
                    } 
                    else if(timerCheck === 1){
                        
                        
                        
                        audio.play();
                        document.body.style.backgroundImage = "url('pic3bubble.jpg')";
                        timerCheck = timerCheck+1;
                        nextScene();
                    }
                
                }
            }
                            
                //*
            if(timerCheck===0){
                
                setInterval("changeImage()", 3000); //3000
                
            } if(timerCheck===1){
                	setInterval("changeImage()", 8000); //8000
                } 
            
            
            
            function  nextScene() {
                
                
                if(index == 0){
            
            console.log("index0!! ");
            document.getElementById("1").style.color = "white";
            document.getElementById("1").style.position = "absolute";
            document.getElementById("1").style.left = "30%";
            document.getElementById("1").style.top = "72%";
            document.getElementById("1").style.fontSize = "20px";
            document.getElementById("1").style.fontWeight = "bold";
            
            document.getElementById("2").style.color = "white";
            document.getElementById("2").style.position = "absolute";
            document.getElementById("2").style.left = "30%";
            document.getElementById("2").style.top = "80%";
            document.getElementById("2").style.fontSize = "20px";
            document.getElementById("2").style.fontWeight = "bold";
            
            document.getElementById("3").style.color = "white";
            document.getElementById("3").style.position = "absolute";
            document.getElementById("3").style.left = "30%";
            document.getElementById("3").style.top = "86%";
            document.getElementById("3").style.fontSize = "20px";
            document.getElementById("3").style.fontWeight = "bold";
        }   
            
            if(index == 1){
            
            console.log("index1!! ");
            document.getElementById("1").style.color = "brown";
            document.getElementById("1").style.position = "absolute";
            document.getElementById("1").style.left = "60%";
            document.getElementById("1").style.top = "60%";
            document.getElementById("1").style.fontSize = "20px";
            document.getElementById("1").style.fontWeight = "bold";
            
            document.getElementById("2").style.color = "brown";
            document.getElementById("2").style.position = "absolute";
            document.getElementById("2").style.left = "58%";
            document.getElementById("2").style.top = "69%";
            document.getElementById("2").style.fontSize = "20px";
            document.getElementById("2").style.fontWeight = "bold";
            
            document.getElementById("3").style.color = "brown";
            document.getElementById("3").style.position = "absolute";
            document.getElementById("3").style.left = "60%";
            document.getElementById("3").style.top = "78%";
            document.getElementById("3").style.fontSize = "20px";
            document.getElementById("3").style.fontWeight = "bold";
        } 
                
            if(index == 2){
            
            console.log("index2!! ");
            document.getElementById("1").style.color = "#008B8B";
            document.getElementById("1").style.position = "absolute";
            document.getElementById("1").style.left = "5%";
            document.getElementById("1").style.top = "5%";
            document.getElementById("1").style.fontSize = "20px";
            document.getElementById("1").style.fontWeight = "bold";
            
            document.getElementById("2").style.color = "#008B8B";
            document.getElementById("2").style.position = "absolute";
            document.getElementById("2").style.left = "10%";
            document.getElementById("2").style.top = "10%";
            document.getElementById("2").style.fontSize = "20px";
            document.getElementById("2").style.fontWeight = "bold";
            
            document.getElementById("3").style.color = "#008B8B";
            document.getElementById("3").style.position = "absolute";
            document.getElementById("3").style.left = "5%";
            document.getElementById("3").style.top = "15%";
            document.getElementById("3").style.fontSize = "20px";
            document.getElementById("3").style.fontWeight = "bold";
        } 
                
            if(index == 3){
            
            console.log("index3!! ");
            document.getElementById("1").style.color = "#FFF8DC";
            document.getElementById("1").style.position = "absolute";
            document.getElementById("1").style.left = "17%";
            document.getElementById("1").style.top = "50%";
            document.getElementById("1").style.fontSize = "20px";
            document.getElementById("1").style.fontWeight = "bold";
            
            document.getElementById("2").style.color = "#FFF8DC";
            document.getElementById("2").style.position = "absolute";
            document.getElementById("2").style.left = "17%";
            document.getElementById("2").style.top = "55%";
            document.getElementById("2").style.fontSize = "20px";
            document.getElementById("2").style.fontWeight = "bold";
            
            document.getElementById("3").style.color = "#FFF8DC";
            document.getElementById("3").style.position = "absolute";
            document.getElementById("3").style.left = "20%";
            document.getElementById("3").style.top = "60%";
            document.getElementById("3").style.fontSize = "20px";
            document.getElementById("3").style.fontWeight = "bold";
        } 
                
                
                console.log("in next scene, this is counter: " + counter);
                
//                if(index === scenarios.length) return;
                
//                
                console.log("this is counter: " + counter);
                
                if(counter%2 !=0){
                    
                     
                     document.getElementById("4").style.visibility="hidden";
                    // Clear the transitional response
                    document.getElementById("answer3").innerHTML="";
                    
                    // Update the value of the buttons to reflect the current question's answers
                    updateButtons();
                    
                    //console.log("this is scenarios length: " + scenarios.length)
                    // The current JS object background
                    var imageString = scenarios[index]["background"];
                    document.body.style.backgroundImage = "url(" + imageString + ")";
                    document.getElementById("question"+questioncount).innerHTML=scenarios[index]["question"];
                    document.getElementById("educationalFact0").innerHTML="";
                    document.getElementById("educationalFact1").innerHTML="";
                    document.getElementById("educationalFact2").innerHTML="";
                    document.getElementById("educationalFact3").innerHTML="";
                    audio.src = scenarios[index]["audio"];
                    audio.play();
                    
                    index = index + 1;
                    counter = counter + 1;
                    questioncount = questioncount + 1;
                }
                
                // If the user answered a question, we want to show a transitional educational fact
                
                
                else{
                    document.getElementById("4").style.visibility="visible";
                    console.log("adding transitional response, this is index" + index);
                    console.log("adding transitional response, this is counter" + counter);
                    
                                    
                    clearButtons()
                    
//                    audio.src = scenarios[index]["audio"];
//                    audio.play();
                    document.getElementById("educationalFact"+questioncount).innerHTML=scenarios[index-1]["transitionResponse"]
                    document.getElementById("question0").innerHTML="";
                    document.getElementById("question1").innerHTML="";
                    document.getElementById("question2").innerHTML="";
                    document.getElementById("question3").innerHTML="";
                    
                    console.log("hi")
                    counter = counter + 1;
                    
                
                //console.log("index after incrementing: " + index)
                
                }
            }
        </script>
        
        
        
    </body>